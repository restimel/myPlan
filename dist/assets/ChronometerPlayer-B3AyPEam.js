import{z as X,A as he,B as be,C as ge,D as ye,E as Ee,r as T,G as we,H as B,I as Be,h as g,J as Ce,K as ee,L as _,c as d,l as v,N as Se,O as Ve,P as ke,d as te,a as E,n as ne,f as R,k as S,t as M,o as w,_ as oe,Q as K,b as k,w as O,M as L,R as _e}from"./index-CTAKiwyD.js";const Re="data:video/webm;base64,GkXfowEAAAAAAAAQQoKFd2VibQBCh4ECQoWBAhhTgGcBAAAAAAACNxFNm3QBAAAAAAAAjE27AQAAAAAAABJTq4QVSalmU6yIAAAAAAAAAJhNuwEAAAAAAAASU6uEFlSua1OsiAAAAAAAAAEF7JoBAAAAAAAAElOrhBBDp3BTrIj//////////027AQAAAAAAABJTq4QcU7trU6yIAAAAAAAAAg/smgEAAAAAAAASU6uEElTDZ1OsiP//////////FUmpZgEAAAAAAABhKtexgw9CQESJiECMOH9XLeQ/TYClR1N0cmVhbWVyIG1hdHJvc2thbXV4IHZlcnNpb24gMS4yNC4yAFdBmUdTdHJlYW1lciBNYXRyb3NrYSBtdXhlcgBEYYgK3hOVtIx2IBZUrmsBAAAAAAAAV64BAAAAAAAATteBAYOBAXPFiEJJy6eyodjgU26GVmlkZW8A4AEAAAAAAAAjsIETuoEQmoECVbABAAAAAAAAEFW5gQFVsYEGVbqBBlW7gQaGhlZfVlA4AB9DtnUBAAAAAAAAm+eBFaOjgQABgBACAJ0BKhMAEAAQRwiFhYiZhIgCAgAJEeuA/v9vLACjlYEAIgCxAQBBEBAAGAAYWC/0AAhAAKOVgQBEALEBAEEQEAAYABhYL/QACEAAo5WBAGcAsQEAQRAQABgAGFgv9AAIQACjlYEAiQCxAQBBEBAAGAAYWC/0AAhAAKOVgQOIALEBAEEQEAAYABhYL/QACEAAHFO7awEAAAAAAAAcuwEAAAAAAAATs4EVtwEAAAAAAAAH94EB8YIBaA==";function ae(){return Math.round(Math.random()*2**50)}function F(e){return be()?(ge(e),!0):!1}const I=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const We=Object.prototype.toString,Ie=e=>We.call(e)==="[object Object]",Qe=()=>{};function xe(...e){if(e.length!==1)return ye(...e);const t=e[0];return typeof t=="function"?Ee(we(()=>({get:t,set:Qe}))):T(t)}function N(e){return Array.isArray(e)?e:[e]}function Te(e){return ee()}function Pe(e,t=!0,n){Te()?X(e,n):t?e():he(e)}function Oe(e,t=1e3,n={}){const{immediate:a=!0,immediateCallback:i=!1}=n;let l=null;const c=B(!1);function u(){l&&(clearInterval(l),l=null)}function A(){c.value=!1,u()}function s(){const r=_(t);r<=0||(c.value=!0,i&&e(),u(),c.value&&(l=setInterval(e,r)))}if(a&&I&&s(),Be(t)||typeof t=="function"){const r=g(t,()=>{c.value&&I&&s()});F(r)}return F(A),{isActive:Ce(c),pause:A,resume:s}}function Le(e,t,n){return g(e,t,{...n,immediate:!0})}function Me(e,t,n){return g(e,(i,l,c)=>{i&&t(i,l,c)},{...n,once:!1})}const U=I?window:void 0,ie=I?window.document:void 0,se=I?window.navigator:void 0;function V(e){var t;const n=_(e);return(t=n==null?void 0:n.$el)!=null?t:n}function re(...e){const t=[],n=()=>{t.forEach(u=>u()),t.length=0},a=(u,A,s,r)=>(u.addEventListener(A,s,r),()=>u.removeEventListener(A,s,r)),i=d(()=>{const u=N(_(e[0])).filter(A=>A!=null);return u.every(A=>typeof A!="string")?u:void 0}),l=Le(()=>{var u,A;return[(A=(u=i.value)==null?void 0:u.map(s=>V(s)))!=null?A:[U].filter(s=>s!=null),N(_(i.value?e[1]:e[0])),N(v(i.value?e[2]:e[1])),_(i.value?e[3]:e[2])]},([u,A,s,r])=>{if(n(),!(u!=null&&u.length)||!(A!=null&&A.length)||!(s!=null&&s.length))return;const o=Ie(r)?{...r}:r;t.push(...u.flatMap(f=>A.flatMap(C=>s.map(y=>a(f,C,y,o)))))},{flush:"post"}),c=()=>{l(),n()};return F(n),c}function Ne(){const e=B(!1),t=ee();return t&&X(()=>{e.value=!0},t),e}function $(e){const t=Ne();return d(()=>(t.value,!!e()))}function Ye(e={}){const{document:t=ie}=e;if(!t)return B("visible");const n=B(t.visibilityState);return re(t,"visibilitychange",()=>{n.value=t.visibilityState},{passive:!0}),n}function Fe(e,t,n={}){const{window:a=U,...i}=n;let l;const c=$(()=>a&&"ResizeObserver"in a),u=()=>{l&&(l.disconnect(),l=void 0)},A=d(()=>{const o=_(e);return Array.isArray(o)?o.map(f=>V(f)):[V(o)]}),s=g(A,o=>{if(u(),c.value&&a){l=new ResizeObserver(t);for(const f of o)f&&l.observe(f,i)}},{immediate:!0,flush:"post"}),r=()=>{u(),s()};return F(r),{isSupported:c,stop:r}}function Ge(e,t={width:0,height:0},n={}){const{window:a=U,box:i="content-box"}=n,l=d(()=>{var o,f;return(f=(o=V(e))==null?void 0:o.namespaceURI)==null?void 0:f.includes("svg")}),c=B(t.width),u=B(t.height),{stop:A}=Fe(e,([o])=>{const f=i==="border-box"?o.borderBoxSize:i==="content-box"?o.contentBoxSize:o.devicePixelContentBoxSize;if(a&&l.value){const C=V(e);if(C){const y=C.getBoundingClientRect();c.value=y.width,u.value=y.height}}else if(f){const C=N(f);c.value=C.reduce((y,{inlineSize:G})=>y+G,0),u.value=C.reduce((y,{blockSize:G})=>y+G,0)}else c.value=o.contentRect.width,u.value=o.contentRect.height},n);Pe(()=>{const o=V(e);o&&(c.value="offsetWidth"in o?o.offsetWidth:t.width,u.value="offsetHeight"in o?o.offsetHeight:t.height)});const s=g(()=>V(e),o=>{c.value=o?t.width:0,u.value=o?t.height:0});function r(){A(),s()}return{width:c,height:u,stop:r}}function De(e){const{pattern:t=[],interval:n=0,navigator:a=se}=e||{},i=$(()=>typeof a<"u"&&"vibrate"in a),l=xe(t);let c;const u=(s=l.value)=>{i.value&&a.vibrate(s)},A=()=>{i.value&&a.vibrate(0),c==null||c.pause()};return n>0&&(c=Oe(u,n,{immediate:!1,immediateCallback:!1})),{isSupported:i,pattern:t,intervalControls:c,vibrate:u,stop:A}}function He(e={}){const{navigator:t=se,document:n=ie}=e,a=B(!1),i=B(null),l=Ye({document:n}),c=$(()=>t&&"wakeLock"in t),u=d(()=>!!i.value&&l.value==="visible");c.value&&(re(i,"release",()=>{var o,f;a.value=(f=(o=i.value)==null?void 0:o.type)!=null?f:!1},{passive:!0}),Me(()=>l.value==="visible"&&(n==null?void 0:n.visibilityState)==="visible"&&a.value,o=>{a.value=!1,A(o)}));async function A(o){var f;await((f=i.value)==null?void 0:f.release()),i.value=c.value?await t.wakeLock.request(o):null}async function s(o){l.value==="visible"?await A(o):a.value=o}async function r(){a.value=!1;const o=i.value;i.value=null,await(o==null?void 0:o.release())}return{sentinel:i,isSupported:c,isActive:u,request:s,forceRequest:A,release:r}}function Je(){ue(1200,300,.4)}function je(){ue(1200,1e3,.6)}function ue(e=1e3,t=500,n=.2){const a=new(window.AudioContext||window.webkitAudioContext),i=a.createOscillator(),l=a.createGain();i.connect(l),l.connect(a.destination),i.type="sine",i.frequency.value=e,l.gain.value=n,i.start(),i.stop(a.currentTime+t/1e3)}const ce=200,q="default period",m={id:0,name:q,duration:360,endEffect:"stop",activateSound:!0,activateVibration:!0,soundWarning:!0},p=T([]);le(-1);const ct=d(()=>{const e=p.value;if(e.length>1)return!1;const t=e[0];return!(!/^period \d+$/.test(t.name)||t.duration!==m.duration||t.endEffect!==m.endEffect||t.activateSound!==m.activateSound||t.activateVibration!==m.activateVibration||t.soundWarning!==m.soundWarning)});function Ue(e,t=p.value.length){return e||(e={...m}),e.id||(e.id=ae()),(!e.name||e.name===q)&&(e.name=`period ${t+1}`),(typeof e.duration!="number"||e.duration<=0)&&(e.duration=m.duration),e.endEffect||(e.endEffect=m.endEffect),typeof e.activateSound!="boolean"&&(e.activateSound=m.activateSound),typeof e.activateVibration!="boolean"&&(e.activateVibration=m.activateVibration),typeof e.soundWarning!="boolean"&&(e.soundWarning=m.soundWarning),e}function $e(){const e=Ve();e&&(p.value=e.map(Ue)),g(p,t=>{ke(t)},{deep:!0})}$e();function le(e,t=m){const n=p.value,a={...t};return e>=0&&e<n.length?(n[e]=a,p.value=n,e):(a.id=ae(),a.name===q&&(a.name=`period ${n.length+1}`),n.push(a),p.value=n,n.length-1)}function lt(e){const t=p.value;return e>=0&&e<t.length?(t.splice(e,1),p.value=t,!0):!1}function At(){p.value=[],le(-1)}const D=T(0),b=d(()=>p.value[D.value]),h=d(()=>Q.value!==0),P=T(0),Ae=d(()=>Math.floor(P.value/1e3)),Q=T(0);let H=performance.now();const de=d(()=>{const e=P.value;return b.value.duration*1e3-e}),qe=d(()=>{const e=Ae.value;return b.value.duration-e}),x=d(()=>{const e=b.value.duration*1e3;return P.value>=e}),ze=d(()=>{const e=de.value;return fe(e)});function fe(e){return e>6e4?60:e>1e4?10:e>0?Math.floor(e/1e3):0}function ve(e){const n=p.value.length;if(!n)return;const a=e%n;e<0?D.value=0:D.value=a}g(x,()=>{if(x.value&&h.value){const e=b.value;switch(e.endEffect){case"continue":break;case"restart":j();break;case"stop":W();break;case"startNext":{pe(),j();break}}Ke(e)}});g(ze,e=>{const t=b.value,n=t.soundWarning&&t.activateSound,a=fe(t.duration*1e3);n&&h.value&&e!==a&&Je()});function pe(){const t=p.value.indexOf(b.value);ve(t+1)}function Ke(e){e.activateSound&&je(),e.activateVibration&&Ze()}function z(){if(!h.value)return;const e=performance.now(),t=e-H;H=e,P.value+=t;const n=de.value;n<ce&&n>=0&&setTimeout(z,n)}function J(){P.value=0}function Y(){H=performance.now(),clearInterval(Q.value),me.request("screen"),Q.value=setInterval(z,ce)}function j(){J(),Y()}function W(){clearInterval(Q.value),Q.value=0,z(),me.release()}const{vibrate:Ze,isSupported:dt}=De({pattern:[300,100,300,100,300]}),me=Se(He()),Xe={key:0,class:"sign"},et={key:1,class:"double-digits"},tt={key:2,class:"separator"},nt={class:"double-digits"},ot={class:"double-digits"},at=te({__name:"ChronometerDisplay",props:{value:{},duration:{},warn:{type:Boolean}},setup(e){const t=e;function n(s){return s.toString(10).padStart(2,"0")}const a=d(()=>Math.abs(t.value)),i=d(()=>{const s=a.value,r=Math.floor(s/3600);return n(r)}),l=d(()=>{const s=a.value,r=Math.floor(s/60)%60;return n(r)}),c=d(()=>{const r=a.value%60;return n(r)}),u=d(()=>t.duration>=3600||i.value!=="00"),A=d(()=>!!t.warn&&!x.value&&t.value<=10);return(s,r)=>(w(),E("div",{class:ne(["chronometer-display",{timeout:v(x),running:v(h),warning:A.value}])},[s.value<0?(w(),E("div",Xe," - ")):R("",!0),u.value?(w(),E("div",et,M(i.value),1)):R("",!0),u.value?(w(),E("div",tt," : ")):R("",!0),S("div",nt,M(l.value),1),r[0]||(r[0]=S("div",{class:"separator"}," : ",-1)),S("div",ot,M(c.value),1)],2))}}),Z=oe(at,[["__scopeId","data-v-ef7215f4"]]),it={class:"period-name"},st={class:"period-actions"},rt=te({__name:"ChronometerPlayer",setup(e){_e(s=>({"8abeb2da":l.value}));const t=K("awakeVideo"),n=K("chronometerPlayer"),{width:a,height:i}=Ge(n),l=d(()=>{const r=5*i.value/6;return r*1.4<a.value?`${r/2}px`:`${a.value/1.4/2}px`});g(h,s=>{var r,o;s?(r=t.value)==null||r.play():(o=t.value)==null||o.pause()});function c(){h.value?W():Y()}function u(){const s=h.value;W(),J(),pe(),s&&j()}function A(){ve(0),J()}return(s,r)=>(w(),E("div",{class:ne(["chronometer-player",{timeout:v(x)}]),onClick:c,ref_key:"chronometerPlayer",ref:n},[S("video",{class:"keep-awake-video",src:Re,loop:"",controls:!1,ref_key:"awakeVideo",ref:t},null,512),k(Z,{class:"time-left",value:v(qe),duration:v(b).duration,warn:""},null,8,["value","duration"]),k(Z,{class:"time-spent",value:v(Ae),duration:v(b).duration},null,8,["value","duration"]),S("div",it,M(v(b).name),1),S("aside",st,[v(h)?(w(),E("button",{key:0,class:"btn-transparent btn-small action",onClick:r[0]||(r[0]=O((...o)=>v(W)&&v(W)(...o),["stop","prevent"]))},[k(L,{icon:"pause"})])):R("",!0),v(h)?R("",!0):(w(),E("button",{key:1,class:"btn-transparent btn-small action",onClick:r[1]||(r[1]=O((...o)=>v(Y)&&v(Y)(...o),["stop","prevent"]))},[k(L,{icon:"play"})])),S("button",{class:"btn-transparent btn-small action",onClick:O(A,["stop","prevent"])},[k(L,{icon:"restart"})]),v(p).length>1?(w(),E("button",{key:2,class:"btn-transparent btn-small action",onClick:O(u,["stop","prevent"])},[k(L,{icon:"next"})])):R("",!0)])],2))}}),ft=oe(rt,[["__scopeId","data-v-1a2bb1f3"]]);export{ft as C,lt as a,ct as b,At as c,m as d,b as e,ae as g,dt as i,p,ve as s,le as u};
